services:
  - name: jellyfin-torrserver
    type: web
    instance_type: nano
    regions:
      - fra
    env:
      - key: JELLYFIN_PublishedServerUrl
        value: https://erno-media.koyeb.app
      - key: TS_PORT
        value: "8090"
      - key: TS_CONF_PATH
        value: /config/torrserver
    ports:
      - port: 8080
        protocol: http
    health_checks:
      - port: 8080
        protocol: http
        path: /
        grace_period: 60
        interval: 10
        restart_limit: 3
        timeout: 10
    build:
      dockerfile: Dockerfile.jellyfin
      context: .
    volumes:
      - path: /config
        size: 1
      - path: /cache
        size: 5
      - path: /media
        size: 2
